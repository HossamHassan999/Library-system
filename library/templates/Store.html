{% load static %}
<!DOCTYPE html>
<html  lang="ar">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
  
    <title>Library system</title>
    <link rel="stylesheet" href="{% static 'plugins/fontawesome-free/css/all.min.css' %}">

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="{% static 'plugins/jquery_datepacker/jquery_ui.css' %}">
    <!-- IonIcons -->
    <link rel="stylesheet" href="{% static 'http://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css' %}">
    <!-- Theme style -->
    <link rel="stylesheet" href="{% static 'dist/css/adminlte_ar.min.css' %}">
    <!-- Google Font: Source Sans Pro -->
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700" rel="stylesheet">
  </head>

  
<body dir="rtl" class="hold-transition">

<!-- Navbar -->
<nav class="main-header navbar navbar-expand navbar-white navbar-light">
  <!-- Left navbar links -->
  <ul class="navbar-nav">
      <li class="nav-item">
          <a class="nav-link" data-widget="pushmenu" href="#"><i class="fas fa-bars"></i></a>
      </li>
    
      <li class="nav-item d-none d-sm-inline-block">
          <a href="{% url 'lib:login' %}" class="nav-link">Login</a>
      </li>
    
      {% if user.is_authenticated %}
          <li class="nav-item d-none d-sm-inline-block">
              <a href="{% url 'lib:index' %}" class="nav-link">Home</a>
          </li>
          <li class="nav-item d-none d-sm-inline-block">
              <a href="{% url 'lib:Books' %}" class="nav-link">Books</a>
          </li>
          <li class="nav-item d-none d-sm-inline-block">
              <a href="{% url 'lib:logout' %}" class="nav-link">Logout</a>
          </li>
      {% endif %}
  </ul>
   


    <!-- SEARCH FORM --> 
    <form method="GET" action="{% url 'lib:store' %}" class="form-inline ml-3">
      <div class="input-group input-group-sm">
        <input class="form-control form-control-navbar" name="search_name1" type="search" placeholder="Search" aria-label="Search">
        <div class="input-group-append">
          <button class="btn btn-navbar" type="submit">
            <i class="fas fa-search"></i>
          </button>
        </div>
      </div>
    </form>
  </nav> 
  <!-- /.navbar -->
  <div style="direction: rtl;" class="wrapper">




    <!-- Content Wrapper. Contains page content -->
    <div   class="content-wrapper">
      <!-- Content Header (Page header) -->
  
  

  
  
          <!-- تصنيفات-->
  
          <div class="row justify-content-center mb-3">
            <div class="col-4 ">
              <ul class="nav">
              {% for X in Tasnif %}
                <li class="nav-item ">
                  <a id="" class="nav-link bg-primary" href="{% url 'lib:index_cat' id=X.id  %}">{{X.Tasnif}}</a>
                </li>
              {% endfor %}  
              
              </ul>
            </div>
          </div>
          <!-- books -->

          <div class="row">
        {% for X in AllBooks%}
          <!-- الكتب -->
              <div id="" class="col-md-4">
                  <!-- Widget: user widget style 1 -->
                <div id="" class="card card-widget widget-user ">
                  <!-- Add the bg color to the header using any of the bg-* classes -->
                <!-- قائمة منسدلة -->


                <div class="widget-user-header bg-info">
                  <h3 class="widget-user-username">{{X.name}}</h3>
                  <h5 class="widget-user-desc"> {{X.Author}} </h5>
                  
                </div>
                <div class="widget-user-image">
                  <img style="width:100px; height: 100px;" class="" src="{{ X.image.url }}" alt="">
                </div>
                <div class="card-footer">
                  <div class="row">
                    <div class="col-sm-4 border-right">
                      <div class="description-block">
                        <h5 class="description-header">{{X.number_pages}}</h5>
                        <span class="description-text">صفحة</span>
                      </div>
                      <!-- /.description-block -->
                    </div>
                        <!-- /.col -->
                    <div class="col-sm-4 border-right"> 
                      <div class="description-block">
                        <h5 class="description-header">{{X.price}}</h5>
                        <span class="description-text">السعر</span>
                      </div>
                      <!-- /.description-block -->
                    </div>
                        <!-- /.col -->
                    <div class="col-sm-4">
                      <div class="description-block">
                        <h5 class="description-header text-dark">{{X.status}}</h5>
                        <span class="description-text">الحالة</span>
                     
                      </div>
                    {% if X.status == 'متاح' %} 

                      <div class="text-right">
                        <a href="{% url 'lib:buying' id=X.id  %}" class="btn btn-sm btn-primary">
                          <i class="fas fa-book"></i>شراء 
                        </a>
                      </div>
                      
                    {% endif %}
                      <!-- /.description-block -->
                    </div>
                        <!-- /.col -->
                  </div>
                      <!-- /.row -->
                </div>
                </div>
                  <!-- /.widget-user -->
              </div>
          <!-- نهاية الكتاب -->
        {% endfor %}  

              <div class="row">
                <div class="col text-center">
                  <!--اضف صورة هنا في حالة عدم وجود كتب-->   
                </div>
              </div>
          </div>    
      </div>
    </div>
        <!-- /.container-fluid -->
  </div>
      <!-- /.content -->
</div>
    <!-- /.content-wrapper -->
  
  </div>


  <footer class="main-footer">
    <strong>Copyright &copy; 2023-2024 <a href="">Hossam Hassan</a>.</strong>
    All rights reserved.
    <div class="float-right d-none d-sm-inline-block">
        <a target="_blank" class="text-danger" href=""><i class="fab fa-lg fa-youtube"></i></a>
        <a target="_blank" href=""><i class="fab fa-lg ml-1 fa-facebook"></i></a>
        <a target="_blank" class="text-warning" href=""><i class="fab fa-lg ml-1 fa-instagram"></i></a>
    </div>
  </footer>
    

  <!-- REQUIRED SCRIPTS -->
  <script src="{% static 'plugins/jquery_datepacker/jquery_ui.js' %}"></script>
  
  <!-- jQuery -->
  <script src="{% static 'plugins/jquery/jquery.min.js' %}"></script>
  <!-- Bootstrap -->
  <script src="{% static 'plugins/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
  <!-- AdminLTE -->
  <script src="{% static 'dist/js/adminlte.js' %}"></script>
  <!-- OPTIONAL SCRIPTS -->
  
  <script src="{% static 'plugins/chart.js/Chart.min.js' %}"></script>
  
  <script src="{% static 'dist/js/demo.js' %}"></script>
  <!--<script src="dist/js/pages/dashboard3.js'"></script>
  -->
  <script>
    $(document).ready(function(){
      $('#myModal').on('shown.bs.modal', function () {
        $('#myInput').trigger('focus')
      });
  /*here i will make loop for get id category and status for contact with books */
  /*حساب اجمالي الارباح و هي عبارة عن حاصل جمع سعر الكتب عند البيع بالاضافة الى سعر استعارة الكتاب*/
    });
  </script>
  <script>
   
    
  
  
  $(function () {
    'use strict'
   
    var ticksStyle = {
      fontColor: '#495057',
      fontStyle: 'bold'
    }
  
    var mode      = 'index'
    var intersect = true
  
    var $salesChart = $('#sales-chart')
  
    var salesChart  = new Chart($salesChart, {
  
      type   : 'bar',
      
      data   : {
  
        labels  : [
            
  
          'تفاصيل الارباح',
  
        ],
  
  
        datasets: [
          {
            backgroundColor: '#ced4da',
            borderColor    : '#ced4da',
            data           : [ 
                 '{{borrowedpricesum}}',
            ]
          },
          {
  
            backgroundColor: '#007bff',
            borderColor    : '#007bff',
            data           : [ 
                  '{{Soldsum}}',
            ]
          }
        ]
      },
  
     
     
     options: {
        maintainAspectRatio: false,
        tooltips           : {
          mode     : mode,
          intersect: intersect
        },
        hover              : {
          mode     : mode,
          intersect: intersect
        },
        legend             : {
          display: false
        },
        scales             : {
          yAxes: [{
            // display: false,
            gridLines: {
              display      : true,
              lineWidth    : '4px',
              color        : 'rgba(0, 0, 0, .2)',
              zeroLineColor: 'transparent'
            },
            ticks    : $.extend({
              beginAtZero: true,
  
              // Include a dollar sign in the ticks
              callback: function (value, index, values) {
                if (value >= 1000) {
                  value /= 1000
                  value += 'k'
                }
                return '$' + value
              }
            }, ticksStyle)
          }],
          xAxes: [{
            display  : true,
            gridLines: {
              display: false
            },
            ticks    : ticksStyle
          }]
        }
      }
    });
    
   var pieChart = document.getElementById('visitors-chart').getContext('2d')
  
    var myPieChart = new Chart(pieChart, {
      type: 'pie',
      data: {
        datasets: [{
          data: ['{{AvailableBooks.count}}','{{SoldBooks.count}}','{{RentedBooks.count}}'],
          backgroundColor :["#27c100","#f3545d","#fdaf4b"],
          borderWidth: 10,
          
        }],
        labels: ['متاح', 'تم بيعه', 'مستعار'] 
      },
      options : {
        responsive: true, 
        maintainAspectRatio: false,
        legend: {
          position : 'bottom',
          labels : {
            fontColor: '#000',
            fontSize: 15,
            usePointStyle : true,
            padding:30
          }
        },
        pieceLabel: {
          render: 'percentage',
          fontColor: 'white',
          fontSize: 14,
        },
  
  
      }
    })
  
  })
  
  
   
  </script>
  
  </body>
  </html>
  


  
 
